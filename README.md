# tagging-analytic-forms
Tagging analytic forms in the Russian National Corpus
Программа для автоматической разметки аналитических форм написана на языке Python (версия 3.5.1).
Входные и выходные данные
В качестве материала для разметки был использован корпус текстов со снятой лексико-грамматической омонимией – подкорпус НКРЯ.
На вход программа получает файлы в формате xhtml в кодировке windows-1251, обходя директорию, название которой задано в тексте программы. 
При выполнении программы создаётся новая директория, в которой создаются текстовые файлы, в которых была проведена разметка аналитических конструкций. Формат файлов на выходе аналогичен формату входных.
На рисунке 1 представлен образец входных данных. Тексты НКРЯ размечены с помощью следующих тегов: 
…
<p><se>
<w><ana lex="мой" gr="A-PRO=m,sg,nom"></ana>Мой</w>
<w><ana lex="брат" gr="S,m,anim=sg,nom"></ana>брат</w>
<w><ana lex="не" gr="PART"></ana>не</w>
<w><ana lex="быть" gr="V,ipf,intr,act=sg,fut,3p,indic"></ana>б`удет</w>
<w><ana lex="играть" gr="V,ipf,tran=inf,act "></ana>игр`ать</w>
<w><ana lex="в" gr="PR"></ana>в</w>
<w><ana lex="фойе" gr="S,n,inan,0=sg,loc"></ana>фой`е</w>!
</se>
…
Рис. 1. Фрагмент входного файла.
Представленный фрагмент содержит вхождение аналит формы буд врем несов вида. Задача скрипта опознать форму и добавить тег(fut_an) в грам разбор.
Алгоритм работы программы
Из переменной path программа получает путь до директории, в которой находятся файлы для разметки.
В той же папке, в которой находится исходная папка с текстами, создаётся новая для сохранения результатов. Она получает название: «название старой директории» + «_result».
Программа начинает обход исходной директории. С помощью регулярного выражения определяется название формата файла. Если формат файла - xhtml, программа открывает его для дальнейшей работы. Текст из файла помещается в переменную text1. Исходный файл закрывается.
Отдельные функции, производящие разметку различных типов конструкций, по очереди применяются к переменной text1. (Подробнее о функциях в следующем разделе)
Результат работы функций помещается в переменную text2.
В созданной для записи результатов директории создаётся файл с названием идентичным названию исходного файла. В файл записывается содержимое переменной text2. Файл закрывается.
Цикл повторяется для всех файлов во всех папках исходной директории.
Функции для разметки отдельных конструкций
В начале программы создаются функции, предназначенные для добавления тега, обозначающего принадлежность слова к определённой аналитической конструкции, в грамматический разбор слова. 
Общий принцип работы:
Функция получает на вход текст, который записывается в внутреннюю переменную text. С помощью метода sub, предоставленного модулем для работы с регулярными выражениями re, производится поиск словосочетаний, подходящих под структуру, заданную в регулярном выражении.
Далее представлены функции программы и теги для каждой аналит конструкции.
Название функции	Аналитическая конструкция	Тег
tag_fut	будущее время глаголов несов. вида (быть + инфинитив)	fut_an
tag_fut_2	будущее время глаголов несов. вида (инфинитив + быть)	fut_an
tag_fut_3	будущее время глаголов несов. вида (быть + любое слово + инфинитив)	fut_an
tag_fut_4	будущее время глаголов несов. вида (быть + инфинитив + и/или  + инфинитив)	fut_an в разбор каждого инфинитива
tag_compare	сравнительная степень (более/менее + прилагательное/причастие/наречие)	comp_an
tag_superl	превосходная степень (наиболее/наименее + прилагательное/причастие/наречие;
самый + прилагательное/причастие;
прилагательное/причастие/наречие + всех)	supr_an
tag_subjunctive	сослагательное наклонение (инфинитив/глагол прош.вр./предикатив + бы/б)	subj_an
tag_subjunctive_2	сослагательное наклонение (бы/б  + инфинитив/глагол прош.вр.)	subj_an
tag_subjunctive_3	сослагательное наклонение (чтобы/чтоб + инфинитив/глагол прош.вр.; 
или: чтобы/чтоб + любое слово + инфинитив/глагол прош.вр) 	subj_an
tag_passive	страдательный залог (быть + страдательное причастие)	pass_an
tag_coop	совместное действие (давай/давайте + инфинитив/глагол в указательном наклонении)	coop_an
